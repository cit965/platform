import{usePageData as G,useSiteData as I,defineClientConfig as k}from"@vuepress/client";import{useLocaleConfig as U,VPLink as D,startsWith as C,keys as K,endsWith as h,hasGlobalComponent as M}from"vuepress-shared/client";import{defineComponent as R,computed as Y,h as a}from"vue";import{useRouter as $}from"vue-router";import"./styles/auto-catalog.scss";import{useAutoCatalogIconComponent as w,injectAutoCatalogIconComponent as N}from"./index.js";var S=R({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,hideHeading:Boolean},setup(o){const _=w(),f=U(AUTO_CATALOG_LOCALES),T=G(),b=$(),E=I(),O=n=>n?a(_,{icon:n}):null,d=({title:n,path:i,icon:r,class:e})=>a(D,{class:e,to:i},()=>[O(r),n||i]),x=n=>{const i=n[AUTO_CATALOG_INDEX_META_KEY];return typeof i>"u"||i},L=()=>{const n=o.base||T.value.path.replace(/\/[^/]+$/,"/"),i=b.getRoutes(),r=[];return i.filter(({meta:e,path:t})=>{if(!C(t,n)||t===n)return!1;if(n==="/"){const s=K(E.value.locales).filter(l=>l!=="/");if(t==="/404.html"||s.some(l=>C(t,l)))return!1}return(h(t,".html")&&!h(t,"/index.html")||h(t,"/"))&&x(e)}).map(({path:e,meta:t})=>{const s=e.substring(n.length).split("/").length;return{title:t[AUTO_CATALOG_TITLE_META_KEY]||"",icon:t[AUTO_CATALOG_ICON_META_KEY]||null,base:e.replace(/\/[^/]+\/?$/,"/"),order:t[AUTO_CATALOG_ORDER_META_KEY]||null,level:h(e,"/")?s-1:s,path:e}}).filter(({title:e,level:t})=>e&&t<=o.level).sort(({title:e,level:t,path:s,order:l},{title:c,level:u,path:g,order:p})=>t-u||(h(s,"/index.html")?-1:h(g,"/index.html")?1:l===null?p===null?e.localeCompare(c):p:p===null?l:l>0?p>0?l-p:-1:p<0?l-p:1)).forEach(e=>{const{base:t,level:s}=e;switch(s){case 1:r.push(e);break;case 2:{const l=r.find(c=>c.path===t);l&&(l.children??=[]).push(e);break}default:{const l=r.find(c=>c.path===t.replace(/\/[^/]+\/$/,"/"));if(l){const c=l.children?.find(u=>u.path===t);c&&(c.children??=[]).push(e)}}}}),r},m=Y(()=>L());return()=>{const n=m.value.some(i=>i.children);return a("div",{class:["vp-catalog-wrapper",{index:o.index}]},[o.hideHeading?null:a("h2",{class:"vp-catalog-main-title"},f.value.title),m.value.length?a(o.index?"ol":"ul",{class:["vp-catalogs",{deep:n}]},m.value.map(({children:i=[],icon:r,path:e,title:t})=>{const s=d({title:t,path:e,icon:r,class:"vp-catalog-title"});return a("li",{class:"vp-catalog"},n?[a("h3",{id:t,class:["vp-catalog-child-title",{"has-children":i.length}]},[a("a",{href:`#${t}`,class:"header-anchor","aria-hidden":!0},"#"),s]),i.length?a(o.index?"ol":"ul",{class:"vp-child-catalogs"},i.map(({children:l=[],icon:c,path:u,title:g})=>a("li",{class:"vp-child-catalog"},[a("div",{class:["vp-catalog-sub-title",{"has-children":l.length}]},[a("a",{href:`#${g}`,class:"header-anchor"},"#"),a(d,{title:g,path:u,icon:c,class:"vp-catalog-title"})]),l.length?a(o.index?"ol":"div",{class:o.index?"vp-sub-catalogs":"vp-sub-catalogs-wrapper"},l.map(({icon:p,path:v,title:A})=>{const y=a(d,{title:A,path:v,icon:p,class:""});return o.index?a("li",{class:"vp-sub-catalog"},y):a(d,{title:A,path:v,icon:p,class:"vp-sub-catalog-link"})})):null]))):null]:a("div",{class:"vp-catalog-child-title"},s))})):a("p",{class:"vp-empty-catalog"},f.value.empty)])}}}),B=k({enhance:({app:o})=>{N(o),M("AutoCatalog",o)||o.component("AutoCatalog",S)}});export{B as default};
//# sourceMappingURL=config.js.map
