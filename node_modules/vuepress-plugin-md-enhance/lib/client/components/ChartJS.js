import{useMutationObserver as h}from"@vueuse/core";import{defineComponent as v,shallowRef as u,ref as d,onMounted as y,watch as j,h as a}from"vue";import{LoadingIcon as S,atou as w}from"vuepress-shared/client";import"../styles/chart.scss";import{g as f}from"../darkmode--ujNj0ho.js";const C=(t,r)=>r==="json"?JSON.parse(t):new Function(`let config,__chart_js_config__;
{
${t}
__chart_js_config__=config;
}
return __chart_js_config__;`)();var b=v({name:"ChartJS",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(t){const r=u(),s=u(),i=d(!1),n=d(!0);let l=!1,c;const m=async e=>{const[{default:o}]=await Promise.all([import("chart.js/auto"),l?Promise.resolve():(l=!0,new Promise(g=>setTimeout(g,MARKDOWN_ENHANCE_DELAY)))]);o.defaults.borderColor=e?"#ccc":"#36A2EB",o.defaults.color=e?"#fff":"#000",o.defaults.maintainAspectRatio=!1;const p=C(w(t.config),t.type),_=s.value.getContext("2d");c?.destroy(),c=new o(_,p),n.value=!1};return y(()=>{i.value=f(),h(document.documentElement,()=>{i.value=f()},{attributeFilter:["class","data-theme"],attributes:!0}),j(i,e=>m(e),{immediate:!0})}),()=>[t.title?a("div",{class:"chartjs-title"},decodeURIComponent(t.title)):null,n.value?a(S,{class:"chartjs-loading",height:192}):null,a("div",{ref:r,class:"chartjs-wrapper",id:t.id,style:{display:n.value?"none":"block"}},a("canvas",{ref:s,height:400}))]}});export{b as default};
//# sourceMappingURL=ChartJS.js.map
