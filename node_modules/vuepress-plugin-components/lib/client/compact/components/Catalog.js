import{usePageData as L,useSiteData as F}from"@vuepress/client";import{defineComponent as A,computed as R,h as a}from"vue";import{useRouter as S}from"vue-router";import{useLocaleConfig as U,VPLink as m,startsWith as v,keys as D,endsWith as u}from"vuepress-shared/client";import f from"../../components/FontIcon.js";import"../styles/catalog.scss";import"../../styles/font-icon.scss";var E=A({name:"Catalog",props:{base:{type:String,default:""},level:{type:Number,default:3},titleGetter:{type:Function,default:r=>r.title},iconGetter:{type:Function,default:r=>r.icon},orderGetter:{type:Function,default:r=>r.order||0},shouldIndex:{type:Function,default:r=>r.index!==!1}},setup(r){const $=U(CATALOG_LOCALES),b=L(),y=S(),C=F(),k=()=>{const c=r.base||b.value.path.replace(/\/[^/]+$/,"/"),p=y.getRoutes(),s=[];return p.filter(({meta:e,path:t})=>{if(!v(t,c)||t===c)return!1;if(c==="/"){const n=D(C.value.locales).filter(l=>l!=="/");if(t==="/404.html"||n.some(l=>v(t,l)))return!1}return(u(t,".html")&&!u(t,"/index.html")||u(t,"/"))&&r.shouldIndex(e)}).map(({path:e,meta:t})=>{const n=e.substring(c.length).split("/").length;return{title:r.titleGetter(t),icon:r.iconGetter(t),base:e.replace(/\/[^/]+\/?$/,"/"),order:r.orderGetter(t),level:u(e,"/")?n-1:n,path:e}}).filter(({title:e,level:t})=>t<=r.level||!e).sort(({title:e,level:t,path:n,order:l},{title:i,level:h,path:d,order:o})=>t-h||(u(n,"/index.html")?-1:u(d,"/index.html")?1:l===null?o===null?e.localeCompare(i):o:o===null?l:l>0?o>0?l-o:-1:o<0?l-o:1)).forEach(e=>{const{base:t,level:n}=e;switch(n){case 1:s.push(e);break;case 2:{const l=s.find(i=>i.path===t);l&&(l.children??=[]).push(e);break}default:{const l=s.find(i=>i.path===t.replace(/\/[^/]+\/$/,"/"));if(l){const i=l.children?.find(h=>h.path===t);i&&(i.children??=[]).push(e)}}}}),s},w=R(()=>k());return()=>a("div",{class:"catalog-wrapper"},[a("h2",{class:"main-title"},$.value.title),w.value.map(({children:c=[],icon:p,path:s,title:e},t)=>[a("h3",{id:e,class:["child-title",{"has-children":c.length}]},[a("a",{href:`#${e}`,class:"header-anchor"},"#"),a(m,{class:"catalog-title",to:s},()=>[p?a(f,{icon:p}):null,`${t+1}. ${e||"Unknown"}`])]),c.length?a("ul",{class:"child-catalog-wrapper"},c.map(({children:n=[],icon:l,path:i,title:h},d)=>a("li",{class:"child-catalog-item"},[a("div",{class:["sub-title",{"has-children":n.length}]},[a("a",{href:`#${h}`,class:"header-anchor"},"#"),a(m,{class:"catalog-title",to:i},()=>[l?a(f,{icon:l}):null,`${t+1}.${d+1} ${h||"Unknown"}`])]),n.length?a("div",{class:"sub-catalog-wrapper"},n.map(({icon:o,path:g,title:x},G)=>a(m,{class:"sub-catalog-item",to:g},()=>[o?a(f,{icon:o}):null,`${t+1}.${d+1}.${G+1} ${x||"Unknown"}`]))):null]))):null])])}});export{E as default};
//# sourceMappingURL=Catalog.js.map
