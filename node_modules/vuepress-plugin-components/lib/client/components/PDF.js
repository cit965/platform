import{defineComponent as h,onMounted as w,h as v}from"vue";import{checkIsiPad as b,checkIsMobile as S,checkIsSafari as y,entries as P,useLocaleConfig as L}from"vuepress-shared/client";import"../styles/pdf.scss";import{withBase as C}from"@vuepress/client";import{isString as F,ensureEndingSlash as T}from"@vuepress/shared";import{u as D}from"../size-EeS19OAO.js";import{g as I}from"../getLink-E24rbGij.js";import"@vueuse/core";const p=e=>{console.error("[PDF]: "+e)},$=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},E=e=>e==="string"?document.querySelector(e):e instanceof HTMLElement?e:document.body,N=e=>{let t="";return e&&(t+=P(e).map(([r,n])=>r==="noToolbar"?`toolbar=${n?0:1}`:`${encodeURIComponent(r)}=${encodeURIComponent(n)}`).join("&"),t&&(t=`#${t.slice(0,t.length-1)}`)),t},u=(e,t,r,n,l)=>{$(t);const a=`${e==="pdfjs"?`${T(C(PDFJS_URL))}web/viewer.html?file=${encodeURIComponent(r)}`:r}${N(n)}`,o=e==="pdfjs"||e==="iframe"?"iframe":"embed",i=document.createElement(o);return i.className="pdf-viewer",i.type="application/pdf",i.title=l,i.src=a,i instanceof HTMLIFrameElement&&(i.allow="fullscreen"),t.classList.add("pdf-viewer-container"),t.appendChild(i),t.getElementsByTagName(o)[0]},M=(e,t=null,{title:r,hint:n,options:l={}})=>{if(typeof window>"u"||!window?.navigator?.userAgent)return null;const{navigator:a}=window,{userAgent:o}=a,i=window.Promise!==void 0,s=b(o)||S(o),f=!s&&y(o),c=!s&&/firefox/i.test(o)&&o.split("rv:").length>1?parseInt(o.split("rv:")[1].split(".")[0],10)>18:!1,g=!s&&(i||c);if(!F(e))return p("URL is not valid"),null;const d=E(t);if(!d)return p("Target element cannot be determined"),null;const m=r||/\/([^/]+).pdf/.exec(e)?.[1]||"PDF Viewer";return g||!s?u(f?"iframe":"embed",d,e,l,m):PDFJS_URL?u("pdfjs",d,e,l,m):(d.innerHTML=n.replace(/\[url\]/g,e),p("This browser does not support embedded PDFs"),null)};var R=h({name:"PDF",props:{url:{type:String,required:!0},title:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:void 0},ratio:{type:[String,Number],default:16/9},page:{type:[String,Number],default:1},noToolbar:Boolean,zoom:{type:[String,Number],default:100}},setup(e){const{el:t,width:r,height:n,resize:l}=D(e),a=L(PDF_LOCALES);return w(()=>{M(I(e.url),t.value,{title:e.title,hint:a.value.hint,options:{page:e.page,noToolbar:e.noToolbar,zoom:e.zoom}}),l()}),()=>v("div",{class:"pdf-viewer-wrapper",ref:t,style:{width:r.value,height:n.value}})}});export{R as default};
//# sourceMappingURL=PDF.js.map
