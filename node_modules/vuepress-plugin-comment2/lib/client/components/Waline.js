import{usePageFrontmatter as c,usePageLang as f}from"@vuepress/client";import{pageviewCount as v}from"@waline/client/pageview";import{defineComponent as g,computed as r,onMounted as L,watch as C,nextTick as h,h as a,defineAsyncComponent as w}from"vue";import{useLocaleConfig as W,LoadingIcon as A}from"vuepress-shared/client";import"@waline/client/dist/waline.css";import"../styles/waline.scss";import{c as N}from"../index-wG_My4pN.js";const y=WALINE_LOCALES;WALINE_META&&import("@waline/client/dist/waline-meta.css");var E=g({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(t){const e=N(),m=c(),p=f(),l=W(y);let i;const n=!!e.serverURL,s=r(()=>{if(!n)return!1;const u=e.pageview!==!1,o=m.value.pageview;return!!o||u!==!1&&o!==!1}),d=r(()=>({lang:p.value==="zh-CN"?"zh-CN":"en",locale:l.value,dark:"html.dark",...e,path:t.identifier}));return L(()=>{C(()=>t.identifier,()=>{i?.(),s.value&&h().then(()=>{setTimeout(()=>{i=v({serverURL:e.serverURL,path:t.identifier})},e.delay||800)})},{immediate:!0})}),()=>n?a("div",{id:"comment",class:"waline-wrapper"},a(w({loader:async()=>(await import("@waline/client/dist/component.mjs")).Waline,loadingComponent:A}),d.value)):null}});export{E as default};
//# sourceMappingURL=Waline.js.map
