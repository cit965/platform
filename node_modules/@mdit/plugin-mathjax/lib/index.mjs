import{createRequire as f}from"node:module";import{tex as d}from"@mdit/plugin-tex";import S from"upath";const a=f(import.meta.url),j=t=>{try{const{AllPackages:e}=a("mathjax-full/js/input/tex/AllPackages.js"),{TeX:l}=a("mathjax-full/js/input/tex.js"),{CHTML:n}=a("mathjax-full/js/output/chtml.js"),{SVG:s}=a("mathjax-full/js/output/svg.js");return{InputJax:new l({packages:e,...t.tex}),OutputJax:t.output==="chtml"?new n({fontURL:S.dirname(a.resolve("mathjax-full/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff")),adaptiveCSS:!0,...t.chtml}):new s({fontCache:"none",...t.svg}),enableAssistiveMml:t.a11y!==!1}}catch{return console.error('[@mdit/mathjax] "mathjax-full" is not installed!'),null}},v=(t={})=>{const e=j(t);if(!e)return null;const{OutputJax:l,InputJax:n}=e,{CHTML:s}=a("mathjax-full/js/output/chtml.js"),o=a("mathjax-full/js/adaptors/liteAdaptor.js").liteAdaptor(),u=a("mathjax-full/js/handlers/html.js").RegisterHTMLHandler,r=a("mathjax-full/js/a11y/assistive-mml.js").AssistiveMmlHandler,{mathjax:m}=a("mathjax-full/js/mathjax.js"),c=u(o);t.a11y!==!1&&r(c);const h=()=>{l instanceof s&&l.clearCache()},i=()=>{n.reset()},p=()=>{const x=o.innerHTML(l.styleSheet(m.document("",e)));return h(),x};return{adaptor:o,documentOptions:e,allowInlineWithSpace:t.allowInlineWithSpace??!1,mathFence:t.mathFence??!1,clearStyle:h,reset:i,outputStyle:p}},w=(t,e)=>{const{mathjax:l}=a("mathjax-full/js/mathjax.js"),{allowInlineWithSpace:n,adaptor:s,documentOptions:o,mathFence:u}=e;t.use(d,{allowInlineWithSpace:n,mathFence:u,render:(r,m)=>{const c=l.document(r,o).convert(r,{display:m});return s.outerHTML(c)}})};export{v as createMathjaxInstance,j as getDocumentOptions,w as mathjax};
//# sourceMappingURL=index.mjs.map
